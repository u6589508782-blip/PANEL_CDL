<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>CDL · Mantenimiento</title>
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#E43B3B">

  <!-- BLOQUE 001: TOKENS + TEMA BLANCO CDL -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" />
  <style>
    :root{
      /* Marca CDL */
      --cdl-red:#E43B3B;        /* rojo corporativo */
      --cdl-black:#1F2937;      /* texto titulares */
      --cdl-ink:#111827;        /* texto intenso */
      --cdl-muted:#6B7280;      /* texto secundario */
      --cdl-line:#E5E7EB;       /* líneas suaves */
      --hdr-h: 76px;            /* alto cabecera móvil */
      --container: 1080px;      /* ancho máx. contenido */
    }
    html,body{ background:#fff; color:#111; font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; }
    /* Contenedor global tipo web corporativa */
    .cdl-container{ width:min(100%, var(--container)); margin-inline:auto; padding-inline:16px; }
    /* Botones rojos corporativos */
    .btn-cdl{
      border:0; border-radius:999px; font-weight:800; letter-spacing:.02em; cursor:pointer;
      padding:.7rem 1.2rem; background:var(--cdl-red); color:#fff;
      box-shadow:0 8px 18px rgba(228,59,59,.22);
    }
    .btn-cdl:active{ transform:translateY(1px); }
    /* Separadores suaves */
    .cdl-divider{ height:1px; background:var(--cdl-line); margin:16px 0; }
  </style>

  <!-- BLOQUE 002: TITULARES CON MARCO ROJO CDL -->
  <style>
    :where(h1,h2,h3){
      position:relative; margin:1.1rem 0 .8rem; padding-left:.65rem;
      font-weight:900; letter-spacing:.02em; color:var(--cdl-black);
      line-height:1.15;
    }
    :where(h1)::before, :where(h2)::before, :where(h3)::before{
      content:""; position:absolute; left:0; top:0.1rem;
      width:18px; height:18px; display:block;
      background:
        linear-gradient(90deg,var(--cdl-red) 0 100%) 0 0/100% 6px no-repeat,
        linear-gradient(180deg,var(--cdl-red) 0 100%) 0 0/6px 100% no-repeat;
      border-radius:1px;
    }
    h1{ font-size:clamp(1.6rem, 2.8vw, 2.25rem); }
    h2{ font-size:clamp(1.25rem, 2.2vw, 1.6rem); }
    h3{ font-size:clamp(1.05rem, 1.8vw, 1.25rem); color:#1b1f24; }
    .cdl-underline{ box-shadow: inset 0 -10px rgba(228,59,59,.18); display:inline; }
  </style>

  <!-- BLOQUE 003: ESTILOS CABECERA + WATERMARK -->
  <style>
    .cdl-header{ position:sticky; top:0; z-index:1000; height:var(--hdr-h); background:#fff; border-bottom:1px solid var(--cdl-line); }
    .cdl-header__inner{ height:var(--hdr-h); display:flex; align-items:center; justify-content:space-between; position:relative; }
    /* Hamburger */
    .cdl-hamb{ width:42px; height:42px; display:grid; place-items:center; border:1px solid #e5e7eb; border-radius:10px; background:#fff; }
    .cdl-hamb span{ width:18px; height:2px; background:#111; display:block; }
    .cdl-hamb span+span{ margin-top:4px; }
    /* User area */
    .cdl-user{ display:flex; align-items:center; gap:.5rem; }
    .cdl-user__role{ font-weight:800; color:#111; }
    .cdl-user__btn{ width:42px; height:42px; border:1px solid #e5e7eb; border-radius:10px; background:#fff; color:#111; }

    /* Watermark en parte alta con logo_mantenimiento */
    #cdlHeader::after{
      content:""; position:absolute; inset:-40% -10% 40% -10%;
      pointer-events:none; z-index:0;
      background:
        radial-gradient(60% 60% at 0% 0%, rgba(228,59,59,.08), transparent 70%) no-repeat,
        url('./logo_mantenimiento.png') left 24px top 8px / 260px auto no-repeat;
      opacity:.9;
    }
    .cdl-header__inner{ position:relative; z-index:1; }
  </style>

  <!-- BLOQUE 004: ESTILOS PANEL LATERAL + LISTAS -->
  <style>
    .cdl-panel{ position:fixed; inset:0 auto 0 0; width:min(86vw, 360px); background:#fff; z-index:1100;
      border-right:1px solid var(--cdl-line); transform:translateX(-102%); transition:transform .28s ease; display:flex; flex-direction:column; }
    .cdl-panel[aria-hidden="false"]{ transform:translateX(0); }
    .cdl-panel__backdrop{ position:fixed; inset:0; background:rgba(0,0,0,.28); z-index:1090; }
    .cdl-panel__head{ display:flex; align-items:center; justify-content:space-between; padding:14px 16px; border-bottom:1px solid var(--cdl-line); }
    .cdl-x{ width:36px; height:36px; border-radius:10px; border:1px solid #e5e7eb; background:#fff; font-weight:900; }
    .cdl-panel__search{ display:flex; gap:.5rem; padding:12px 16px; border-bottom:1px solid var(--cdl-line); }
    .cdl-panel__search input{ flex:1; height:40px; border:1px solid #e5e7eb; border-radius:10px; padding:0 .7rem; }
    .cdl-panel__nav{ display:grid; gap:.2rem; padding:10px 8px; }
    .cdl-panel__nav a{ display:block; padding:.7rem .8rem; border-radius:12px; font-weight:800; color:#111; }
    .cdl-panel__nav a:hover{ background:#f3f4f6; }
    .cdl-panel__foot{ margin-top:auto; padding:10px 16px; border-top:1px solid var(--cdl-line); color:#6b7280; }

    /* Lista/ tarjetas equipos */
    .equipos-grid{ display:grid; grid-template-columns:1fr; gap:12px; padding-bottom:22px; }
    @media(min-width:720px){ .equipos-grid{ grid-template-columns: repeat(2, 1fr); } }
    @media(min-width:1024px){ .equipos-grid{ grid-template-columns: repeat(3, 1fr); } }
    .eq-card{ border:1px solid #e5e7eb; border-radius:14px; background:#fff; overflow:hidden; display:flex; flex-direction:column; }
    .eq-card__media{ aspect-ratio: 16/9; background:#f3f4f6 url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="290" height="162"><rect width="100%" height="100%" fill="%23f3f4f6"/><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="%239ca3af" font-family="Arial" font-size="14">Foto equipo</text></svg>') center/contain no-repeat; }
    .eq-card__body{ padding:12px; display:grid; gap:10px; }
    .eq-title{ font-weight:900; color:#111; display:flex; align-items:center; justify-content:space-between; }
    .eq-meta{ color:#6b7280; font-size:.9rem; }
    .eq-actions{ display:flex; gap:8px; justify-content:space-between; align-items:center; }
    .eq-actions .btn-cdl{ padding:.55rem .8rem; }
    .eq-qr{ width:60px; height:60px; border:1px solid #e5e7eb; border-radius:8px; background:#fff; display:grid; place-items:center; }
  </style>

  <!-- BLOQUE 005: ESTILOS SEMÁFORO + FICHA + PRINT -->
  <style>
    .cdl-sem{ display:flex; align-items:center; gap:.65rem; }
    .cdl-sem .chip{
      display:inline-flex; align-items:center; gap:.45rem; padding:.28rem .6rem;
      border-radius:999px; border:1px solid #e5e7eb; background:#fff; color:#111; font-weight:900;
    }
    .cdl-sem .dot{ width:12px; height:12px; border-radius:50%; box-shadow:0 0 0 2px #fff inset, 0 0 0 1px rgba(0,0,0,.08); }
    .dot-ok{ background:#16a34a; } .dot-warn{ background:#f59e0b; } .dot-stop{ background:#dc2626; }

    .cdl-sem .btn{
      border:1px solid #e5e7eb; background:#fff; color:#111; border-radius:10px; height:36px; padding:0 .7rem; font-weight:800;
    }
    .cdl-sem .btn[data-state="En marcha"]{ border-color:#16a34a33; }
    .cdl-sem .btn[data-state="Restricciones"]{ border-color:#f59e0b33; }
    .cdl-sem .btn[data-state="Parada"]{ border-color:#dc262633; }
    .cdl-sem.compact .btn{ height:30px; padding:0 .55rem; font-size:.85rem; }

    .eq-detail{ display:grid; grid-template-columns:1fr; gap:16px; }
    .eq-detail__right{ border:1px solid #e5e7eb; border-radius:14px; padding:12px; }
    .eq-qr-big{ width:180px; height:180px; border:1px solid #e5e7eb; border-radius:12px; background:#fff; display:grid; place-items:center; margin-bottom:10px; }
    .kpi{ border:1px solid #e5e7eb; border-radius:12px; padding:8px; background:#fff; display:grid; gap:4px; }
    .kpi b{ font-size:1.15rem; }
    .eq-table{ border:1px solid #e5e7eb; border-radius:12px; overflow:hidden; }
    .eq-table table{ width:100%; border-collapse:collapse; font-size:.95rem; }
    .eq-table th,.eq-table td{ padding:8px 10px; border-bottom:1px solid #f1f5f9; text-align:left; }
    .eq-table th{ background:#f8fafc; color:#111; }
    .evt-form{ display:grid; gap:8px; }
    .evt-form input,.evt-form select,.evt-form textarea{
      width:100%; border:1px solid #e5e7eb; border-radius:10px; padding:.55rem .6rem; background:#fff;
    }
    @media(min-width:1024px){
      .eq-detail{ grid-template-columns: 1.35fr .8fr; }
    }

    /* Print */
    @media print{
      header, #cdlHeader, #pagesPanel, #panelBackdrop, .btn-cdl, .cdl-divider, #equiposView { display:none !important; }
      #equipoView{ display:block !important; }
      .eq-detail{ grid-template-columns: 1.2fr .8fr !important; gap:10px; }
      body{ -webkit-print-color-adjust:exact; print-color-adjust:exact; }
    }
  </style>
</head>
<body>
  <!-- BLOQUE 006: CABECERA CDL -->
  <header id="cdlHeader" class="cdl-header" role="banner" aria-label="Cabecera CDL">
    <div class="cdl-container cdl-header__inner">
      <!-- Menú hamburguesa (izquierda) -->
      <button id="btnMenu" class="cdl-hamb" aria-label="Abrir menú" aria-controls="pagesPanel" aria-expanded="false">
        <span></span><span></span><span></span>
      </button>
      <!-- Logotipo CDL -->
      <div class="cdl-logo">
        <img src="./logo-cdl.png" alt="CDL" height="28" />
      </div>
      <!-- Área usuario (derecha) -->
      <div class="cdl-user">
        <div class="cdl-user__role" id="userRole">Mantenimiento</div>
        <button id="userBtn" class="cdl-user__btn" aria-label="Abrir panel de usuario">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="8" r="4"></circle><path d="M4 20c0-4 4-6 8-6s8 2 8 6"></path>
          </svg>
        </button>
      </div>
    </div>
  </header>

  <!-- BLOQUE 007: PANEL LATERAL -->
  <aside id="pagesPanel" class="cdl-panel" aria-hidden="true" aria-label="Menú principal">
    <div class="cdl-panel__head">
      <img src="./logo-cdl.png" alt="CDL" height="24">
      <button id="btnClosePanel" class="cdl-x" aria-label="Cerrar menú">✕</button>
    </div>
    <div class="cdl-panel__search">
      <input id="searchBox" type="search" placeholder="Buscar equipo…">
      <button id="searchBtn" class="btn-cdl" style="padding:.55rem .9rem;">Buscar</button>
    </div>
    <nav class="cdl-panel__nav">
      <a href="#/equipos">Equipos</a>
      <a href="#/incidencias">Incidencias</a>
      <a href="#/repuestos">Repuestos</a>
      <a href="#/kpi">KPIs</a>
      <a href="#/ajustes">Ajustes</a>
    </nav>
    <div class="cdl-panel__foot">
      <small>© CDL · Mantenimiento</small>
    </div>
  </aside>
  <div id="panelBackdrop" class="cdl-panel__backdrop" hidden></div>

  <!-- BLOQUE 008: HERO / LANDING -->
  <main id="main" class="cdl-container" role="main" tabindex="-1" style="padding-top:18px;">
    <section class="cdl-hero" aria-label="Resumen de mantenimiento">
      <h1><span class="cdl-underline">Gestión de Mantenimiento</span></h1>
      <p style="color:#4b5563; max-width:70ch; margin:.4rem 0 1rem">
        Control integral de equipos CDL: estados, incidencias, repuestos y KPIs, con la misma línea visual que <strong>www.cdl.es</strong>.
      </p>
      <div style="display:flex; gap:.6rem; flex-wrap:wrap;">
        <button class="btn-cdl" onclick="location.hash='#/equipos'">Ver equipos</button>
        <button class="btn-cdl" style="background:#111" onclick="location.hash='#/tv'">Dashboard TV</button>
      </div>
    </section>
    <div class="cdl-divider"></div>
  </main>

  <!-- BLOQUE 009: SEMÁFORO TEMPLATE -->
  <template id="tplSemaforo">
    <div class="cdl-sem" role="group" aria-label="Estado del equipo">
      <span class="chip" id="chipState"><i class="dot"></i><b class="txt">—</b></span>
      <button class="btn" data-state="En marcha"       aria-pressed="false">Marcha</button>
      <button class="btn" data-state="Restricciones"   aria-pressed="false">Restr.</button>
      <button class="btn" data-state="Parada"          aria-pressed="false">Paro</button>
    </div>
  </template>

  <!-- BLOQUE 010: VISTA LISTA DE EQUIPOS -->
  <section id="equiposView" class="cdl-container" hidden>
    <h2>Equipos</h2>
    <div id="equiposGrid" class="equipos-grid"></div>
  </section>

  <!-- BLOQUE 011: VISTA FICHA DE EQUIPO -->
  <section id="equipoView" class="cdl-container" hidden>
    <a href="#/equipos" class="btn-cdl" style="background:#111; margin-top:8px;">← Volver</a>
    <header style="margin-top:10px;">
      <h2 id="eqName">Equipo</h2>
      <p id="eqMeta" class="eq-meta"></p>
    </header>

    <div class="cdl-divider"></div>

    <div class="eq-detail">
      <div class="eq-detail__left">
        <div id="eqSem" class="cdl-sem"></div>
        <div style="display:grid; grid-template-columns:repeat(2,1fr); gap:10px; margin-top:10px;">
          <div class="kpi"><b id="kpi-hm">0h</b><span>Horas marcha</span></div>
          <div class="kpi"><b id="kpi-hr">0h</b><span>Horas restricciones</span></div>
          <div class="kpi"><b id="kpi-hp">0h</b><span>Horas paro</span></div>
          <div class="kpi"><b id="kpi-rp">0</b><span>Reparaciones</span></div>
          <div class="kpi"><b id="kpi-mtbf">—</b><span>MTBF</span></div>
          <div class="kpi"><b id="kpi-dispo">—</b><span>Disponibilidad</span></div>
        </div>

        <h3 style="margin-top:14px;">Histórico</h3>
        <div id="eqTable" class="eq-table"></div>
      </div>

      <aside class="eq-detail__right">
        <h3>QR del equipo</h3>
        <div id="eqQR" class="eq-qr-big"></div>
        <button class="btn-cdl" onclick="window.print()">Imprimir ficha</button>

        <h3 style="margin-top:14px;">Nuevo evento</h3>
        <form id="evtForm" class="evt-form">
          <label>Tipo
            <select name="tipo" required>
              <option value="Avería">Avería</option>
              <option value="Restricción">Restricción</option>
              <option value="Paro">Paro</option>
              <option value="Reparación">Reparación</option>
              <option value="Marcha">Marcha</option>
            </select>
          </label>
          <label>Horas (si aplica) <input type="number" step="0.1" min="0" name="horas" placeholder="0"></label>
          <label>Coste repuesto (€) <input type="number" step="0.01" min="0" name="coste" placeholder="0"></label>
          <label>Detalle <textarea name="detalle" rows="3" placeholder="Descripción…"></textarea></label>
          <button class="btn-cdl" type="submit">Guardar evento</button>
        </form>
      </aside>
    </div>
  </section>
<!-- BLOQUE 012: JS SEMÁFORO -->
<script>
(function(){
  if (window.__CDL_SEM__) return; window.__CDL_SEM__ = true;
  const COLORS = { "En marcha":"ok", "Restricciones":"warn", "Parada":"stop" };
  function setChip(chip, estado){
    const dot = chip.querySelector('.dot'), txt = chip.querySelector('.txt');
    dot.className = 'dot dot-' + (COLORS[estado]||'warn');
    txt.textContent = estado || '—';
    chip.setAttribute('data-state', estado);
    chip.parentElement?.querySelectorAll('.btn').forEach(b=>{
      const on = b.dataset.state === estado;
      b.setAttribute('aria-pressed', on?'true':'false');
      b.style.outline = on ? '2px solid rgba(0,0,0,.12)' : 'none';
      b.style.background = on ? '#f9fafb' : '#fff';
    });
  }
  window.mountSemaforo = function(host, {equipo, estado}){
    const tpl = document.getElementById('tplSemaforo');
    if (!tpl || !host) return;
    const node = tpl.content.firstElementChild.cloneNode(true);
    const chip = node.querySelector('#chipState');
    setChip(chip, estado||'Restricciones');
    node.querySelectorAll('.btn').forEach(btn=>{
      btn.addEventListener('click', async ()=>{
        const newState = btn.dataset.state;
        try{
          if (typeof window.setEquipoEstado === 'function'){
            await window.setEquipoEstado(equipo, newState);
          }
          setChip(chip, newState);
        }catch(e){ console.error(e); alert('No se pudo actualizar el estado'); }
      });
    });
    host.innerHTML = ''; host.appendChild(node);
  };
  document.querySelectorAll('[data-sem]').forEach(el=>{
    const equipo = el.getAttribute('data-equipo') || 'Equipo';
    const estado = el.getAttribute('data-state') || 'Restricciones';
    mountSemaforo(el, {equipo, estado});
  });
})();
</script>

<!-- BLOQUE 013: JS PANEL LATERAL -->
<script>
(function(){
  const panel = document.getElementById('pagesPanel');
  const openBtn = document.getElementById('btnMenu');
  const closeBtn = document.getElementById('btnClosePanel');
  const backdrop = document.getElementById('panelBackdrop');
  function open(){ panel.setAttribute('aria-hidden','false'); backdrop.hidden=false; openBtn?.setAttribute('aria-expanded','true'); }
  function close(){ panel.setAttribute('aria-hidden','true'); backdrop.hidden=true; openBtn?.setAttribute('aria-expanded','false'); }
  openBtn?.addEventListener('click', open);
  closeBtn?.addEventListener('click', close);
  backdrop?.addEventListener('click', close);
  window.addEventListener('keydown', e=>{ if(e.key==='Escape') close(); });
  document.getElementById('searchBtn')?.addEventListener('click', ()=>{
    const q = (document.getElementById('searchBox')?.value||'').trim();
    location.hash = '#/equipos?q='+encodeURIComponent(q); close();
  });
})();
</script>

<!-- BLOQUE 014: QR GENERATOR (ligero) -->
<script>
(function(global){function t(a,b){this.mode=h.MODE_8BIT_BYTE;this.data=a;this.parsedData=[];for(var c=0,d=a.length;c<d;c++){var e=a.charCodeAt(c);e>65535?(this.parsedData.push(240|e>>18&7),this.parsedData.push(128|e>>12&63),this.parsedData.push(128|e>>6&63),this.parsedData.push(128|e&63)):e>2047?(this.parsedData.push(224|e>>12&15),this.parsedData.push(128|e>>6&63),this.parsedData.push(128|e&63)):e>127?(this.parsedData.push(192|e>>6&31),this.parsedData.push(128|e&63)):this.parsedData.push(e)}this.parsedData.length!=a.length&&(this.parsedData.unshift(191,187,239));this.getLength=function(){return this.parsedData.length};this.write=function(a){for(var b=0,c=this.parsedData.length;b<c;b++)a.put(this.parsedData[b],8)}}function u(a,b){if(void 0==a.length)throw Error(a.length+"/"+b);for(var c=0;c<a.length&&0==a[c];)c++;this.num=Array(a.length-c+b);for(var d=0;d<a.length-c;d++)this.num[d]=a[d+c]}function v(a,b){this.totalCount=a;this.dataCount=b}function w(){this.buffer=[];this.length=0}w.prototype={get:function(a){return 1==(this.buffer[a>>>3]>>>7-(a%8)&1)},put:function(a,b){for(var c=0;c<b;c++)this.putBit(1==(a>>>b-c-1&1))},putBit:function(a){var b=this.length>>>3;this.buffer.length<=b&&this.buffer.push(0);a&&(this.buffer[b]|=128>>>this.length%8);this.length++}};var h={PAD0:236,PAD1:17,MODE_8BIT_BYTE:4,ErrorCorrectLevel:{L:1,M:0,Q:3,H:2}},x=[[1,26,19],[1,44,34],[1,70,55],[1,100,80],[1,134,108],[2,86,62],[2,98,76],[2,121,93],[2,146,111],[2,86,68],[2,98,78],[2,123,97],[2,146,116],[3,86,62],[3,98,74],[3,123,96],[4,86,62]];function y(a){for(var b=1;b<=40;b++){var c=z(b,h.ErrorCorrectLevel.M);if(a<=A(c))return b}return 40}function z(a,b){var c=[];c.typeNumber=a;c.ecLevel=b;c.rsBlocks=B(a,b);return c}function B(a,b){var c=[];var d=x[Math.min(a-1,x.length-1)];for(var e=0;e<d[0];e++)c.push(new v(d[1],d[2]));return c}function A(a){for(var b=0,c=0;c<a.rsBlocks.length;c++)b+=a.rsBlocks[c].dataCount;return b}function C(a,b){for(var c=new w,d=0;d<b.rsBlocks.length;d++){var e=b.rsBlocks[d];c.put(4,4);c.put(a.getLength(),8);a.write(c);}for(;c.length+4<=8*A(b);)c.put(0,4);for(;c.length%8!=0;)c.put(0,1);for(var f=[],g=0;g<b.rsBlocks.length;g++){e=b.rsBlocks[g];var k=e.dataCount,m=Array(k);for(d=0;d<k;d++)m[d]=255&c.buffer[d+(f.length?f[f.length-1].length:0)];f.push(m)}return D(f)}function D(a){var b=[];for(var c=0;c<a.length;c++)b=b.concat(a[c]);return b}
function E(size,bytes){
  const n=Math.ceil(Math.sqrt(bytes.length*8/3))+8;const dim=Math.max(21, n%2? n:n+1);
  const canvas=document.createElement('canvas'); canvas.width=canvas.height=size;
  const ctx=canvas.getContext('2d'); const mtx=Array.from({length:dim},()=>Array(dim).fill(0));
  function finder(x,y){for(let i=-3;i<=3;i++)for(let j=-3;j<=3;j++){const X=x+i,Y=y+j;if(X<0||Y<0||X>=dim||Y>=dim)continue;const d=Math.max(Math.abs(i),Math.abs(j))<=3&&(Math.max(Math.abs(i),Math.abs(j))%2==0||Math.max(Math.abs(i),Math.abs(j))==3);mtx[Y][X]=d?1:mtx[Y][X];}}
  finder(3,3); finder(dim-4,3); finder(3,dim-4);
  let xi=8, yi=8, bi=0;
  for(let y=yi;y<dim;y++)for(let x=xi;x<dim;x++){ if(mtx[y][x])continue; if(bi>=bytes.length) break; mtx[y][x]= (bytes[bi++]>> (bi%2) ) &1 ?1:0; }
  const s=size/dim; ctx.fillStyle='#fff'; ctx.fillRect(0,0,size,size); ctx.fillStyle='#000';
  for(let y=0;y<dim;y++)for(let x=0;x<dim;x++){ if(mtx[y][x]) ctx.fillRect(Math.floor(x*s),Math.floor(y*s),Math.ceil(s),Math.ceil(s)); }
  return canvas;
}
function qrMake(el, text, size){ size=size||120; if(!el) return;
  var q=new t(text); var cfg=z(y(q.getLength()),h.ErrorCorrectLevel.M); var bytes=C(q,cfg);
  const node=E(size,bytes); el.innerHTML=''; el.appendChild(node);
  el.title='Click para descargar'; el.style.cursor='pointer';
  el.onclick=()=>{ const a=document.createElement('a'); a.download='qr-'+(text.split('/').pop()||'cdl')+'.png'; a.href=node.toDataURL(); a.click(); };
}
global.qrMake = qrMake;
})(window);
</script>

<!-- BLOQUE 015: ROUTER + DATOS + VISTAS -->
<script>
(function(){
  const $ = sel => document.querySelector(sel);
  const LSKEY = 'cdl-equipos';
  function loadEquipos(){
    const demo = [
      {codigo:'EQ-001', nombre:'Sierra KBS 620', estado:'En marcha', horas:{m:120,r:6,p:2}, reparaciones:1, repuestos:230},
      {codigo:'EQ-002', nombre:'Prensa 200T',    estado:'Restricciones', horas:{m:80,r:22,p:5}, reparaciones:3, repuestos:540},
      {codigo:'EQ-003', nombre:'Plasma Hyper',   estado:'Parada', horas:{m:40,r:10,p:30}, reparaciones:5, repuestos:910}
    ];
    try{ const raw = localStorage.getItem(LSKEY); return raw ? JSON.parse(raw) : demo; }catch{ return demo; }
  }
  function saveEquipos(arr){ try{ localStorage.setItem(LSKEY, JSON.stringify(arr)); }catch{} }
  window.setEquipoEstado = async function(codigo, estado){
    const list = loadEquipos(); const item = list.find(e=>e.codigo==codigo); if(!item) return;
    item.estado = estado; saveEquipos(list);
  };
  const EVTKEY = c => 'cdl-evt-'+c;
  function loadEvt(codigo){ try{ return JSON.parse(localStorage.getItem(EVTKEY(codigo))) || []; }catch{return [];} }
  function pushEvt(codigo, evt){
    const arr = loadEvt(codigo); arr.unshift({...evt, ts:Date.now()});
    localStorage.setItem(EVTKEY(codigo), JSON.stringify(arr));
  }
  function calcKPIs(eq){
    const ev = loadEvt(eq.codigo);
    const horas = {...(eq.horas||{m:0,r:0,p:0})};
    let repar = eq.reparaciones||0, repuestos = eq.repuestos||0;
    ev.forEach(e=>{
      if(e.tipo==='Marcha') horas.m += Number(e.horas||0);
      if(e.tipo==='Restricción') horas.r += Number(e.horas||0);
      if(e.tipo==='Paro') horas.p += Number(e.horas||0);
      if(e.tipo==='Reparación') repar += 1;
      if(Number(e.coste)) repuestos += Number(e.coste);
    });
    const total = horas.m + horas.r + horas.p || 1;
    const dispo = (horas.m/total)*100;
    const mtbf = horas.m / Math.max(1, repar);
    return {horas, dispo, mtbf, reparaciones:repar, repuestos};
  }
  function renderEquipos(list, query){
    const grid = document.getElementById('equiposGrid');
    const view = document.getElementById('equiposView');
    if(!grid || !view) return;
    view.hidden = false;
    const q = (query||'').toLowerCase();
    const items = list.filter(e => !q || e.nombre.toLowerCase().includes(q) || String(e.codigo).includes(q));
    grid.innerHTML = '';
    if(items.length === 0){ grid.innerHTML = `<p style="color:#6b7280">No hay resultados para “${q}”.</p>`; return; }
    items.forEach(eq=>{
      const card = document.createElement('article');
      card.className = 'eq-card';
      card.innerHTML = `
        <div class="eq-card__media"></div>
        <div class="eq-card__body">
          <div class="eq-title">
            <span>${eq.nombre}</span>
            <small class="eq-meta">#${eq.codigo}</small>
          </div>
          <div class="eq-actions">
            <div class="eq-sem compact" data-sem data-equipo="${eq.codigo}" data-state="${eq.estado||'Restricciones'}"></div>
            <div class="eq-qr" id="qr-${eq.codigo}" aria-label="QR ${eq.nombre}"></div>
          </div>
          <div style="display:flex; gap:.5rem;">
            <button class="btn-cdl" onclick="gotoEquipo('${eq.codigo}')">Abrir ficha</button>
            <button class="btn-cdl" style="background:#111" onclick="registrarEvento('${eq.codigo}')">Añadir evento</button>
          </div>
        </div>`;
      grid.appendChild(card);
      mountSemaforo(card.querySelector('[data-sem]'), {equipo:eq.codigo, estado:eq.estado});
      qrMake(document.getElementById(`qr-${eq.codigo}`), location.origin+location.pathname+'#/equipo/'+eq.codigo);
    });
  }
  window.gotoEquipo = code => location.hash = '#/equipo/'+code;
  window.registrarEvento = code => location.hash = '#/equipo/'+code+'?add=1';

  function showEquipos(q){
    document.getElementById('equipoView').hidden = true;
    renderEquipos(loadEquipos(), q);
  }
  function showEquipo(code){
    const list = loadEquipos(); const eq = list.find(e=>e.codigo===code);
    if(!eq){ location.hash = '#/equipos'; return; }
    document.getElementById('equiposView').hidden = true;
    const v = document.getElementById('equipoView'); v.hidden=false;
    document.getElementById('eqName').textContent = eq.nombre;
    document.getElementById('eqMeta').textContent = `Código ${eq.codigo} · Estado actual: ${eq.estado}`;
    mountSemaforo(document.getElementById('eqSem'), {equipo:eq.codigo, estado:eq.estado});
    const k = calcKPIs(eq);
    document.getElementById('kpi-hm').textContent = (k.horas.m||0)+'h';
    document.getElementById('kpi-hr').textContent = (k.horas.r||0)+'h';
    document.getElementById('kpi-hp').textContent = (k.horas.p||0)+'h';
    document.getElementById('kpi-rp').textContent = k.reparaciones;
    document.getElementById('kpi-mtbf').textContent = (k.mtbf||0).toFixed(1)+'h';
    document.getElementById('kpi-dispo').textContent = k.dispo.toFixed(1)+'%';
    const url = location.origin+location.pathname+'#/equipo/'+eq.codigo;
    qrMake(document.getElementById('eqQR'), url, 180);
    const ev = loadEvt(eq.codigo);
    const tbl = document.createElement('table');
    tbl.innerHTML = `<thead><tr>
      <th>Fecha</th><th>Tipo</th><th>Horas</th><th>Coste €</th><th>Detalle</th>
    </tr></thead><tbody>${
      ev.map(e=>`<tr><td>${new Date(e.ts).toLocaleString()}</td><td>${e.tipo}</td><td>${e.horas||''}</td><td>${e.coste||''}</td><td>${(e.detalle||'').replace(/</g,'&lt;')}</td></tr>`).join('')
    }</tbody>`;
    const wrap = document.getElementById('eqTable'); wrap.innerHTML=''; wrap.appendChild(tbl);
    const form = document.getElementById('evtForm');
    form.onsubmit = (evn)=>{
      evn.preventDefault();
      const fd = new FormData(form);
      pushEvt(eq.codigo, {
        tipo: fd.get('tipo'),
        horas:Number(fd.get('horas')||0),
        coste:Number(fd.get('coste')||0),
        detalle:String(fd.get('detalle')||'')
      });
      form.reset();
      showEquipo(eq.codigo);
    };
    if(location.hash.includes('?add=1')) form.scrollIntoView({behavior:'smooth', block:'center'});
  }
  function router(){
    const h = location.hash || '#/equipos';
    const [path, queryStr] = h.split('?');
    if(path.startsWith('#/equipo/')){
      const code = decodeURIComponent(path.split('/')[2]||'');
      showEquipo(code);
    }else{
      const q = new URLSearchParams(queryStr||'').get('q')||'';
      showEquipos(q);
    }
  }
  window.addEventListener('hashchange', router);
  window.addEventListener('load', router);
})();
</script>

<!-- BLOQUE 016: REGISTRO SW (opcional si existe sw.js) -->
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', ()=>{
      navigator.serviceWorker.register('./sw.js').catch(()=>{});
    });
  }
</script>
  <!-- BLOQUE 017: Placeholder -->
  <!-- BLOQUE 018: Placeholder -->
  <!-- BLOQUE 019: Placeholder -->
  <!-- BLOQUE 020: Placeholder -->
  <!-- BLOQUE 021: Placeholder -->
  <!-- BLOQUE 022: Placeholder -->
  <!-- BLOQUE 023: Placeholder -->
  <!-- BLOQUE 024: Placeholder -->
  <!-- BLOQUE 025: Placeholder -->
  <!-- BLOQUE 026: Placeholder -->
  <!-- BLOQUE 027: Placeholder -->
  <!-- BLOQUE 028: Placeholder -->
  <!-- BLOQUE 029: Placeholder -->
  <!-- BLOQUE 030: Placeholder -->
  <!-- BLOQUE 031: Placeholder -->
  <!-- BLOQUE 032: Placeholder -->
  <!-- BLOQUE 033: Placeholder -->
  <!-- BLOQUE 034: Placeholder -->
  <!-- BLOQUE 035: Placeholder -->
  <!-- BLOQUE 036: Placeholder -->
  <!-- BLOQUE 037: Placeholder -->
  <!-- BLOQUE 038: Placeholder -->
  <!-- BLOQUE 039: Placeholder -->
  <!-- BLOQUE 040: Placeholder -->
  <!-- BLOQUE 041: Placeholder -->
  <!-- BLOQUE 042: Placeholder -->
  <!-- BLOQUE 043: Placeholder -->
  <!-- BLOQUE 044: Placeholder -->
  <!-- BLOQUE 045: Placeholder -->
  <!-- BLOQUE 046: Placeholder -->
  <!-- BLOQUE 047: Placeholder -->
  <!-- BLOQUE 048: Placeholder -->
  <!-- BLOQUE 049: Placeholder -->
  <!-- BLOQUE 050: Placeholder -->
  <!-- BLOQUE 051: Placeholder -->
  <!-- BLOQUE 052: Placeholder -->
  <!-- BLOQUE 053: Placeholder -->
  <!-- BLOQUE 054: Placeholder -->
  <!-- BLOQUE 055: Placeholder -->
  <!-- BLOQUE 056: Placeholder -->
  <!-- BLOQUE 057: Placeholder -->
  <!-- BLOQUE 058: Placeholder -->
  <!-- BLOQUE 059: Placeholder -->
  <!-- BLOQUE 060: Placeholder -->
  <!-- BLOQUE 061: Placeholder -->
  <!-- BLOQUE 062: Placeholder -->
  <!-- BLOQUE 063: Placeholder -->
  <!-- BLOQUE 064: Placeholder -->
  <!-- BLOQUE 065: Placeholder -->
  <!-- BLOQUE 066: Placeholder -->
  <!-- BLOQUE 067: Placeholder -->
  <!-- BLOQUE 068: Placeholder -->
  <!-- BLOQUE 069: Placeholder -->
  <!-- BLOQUE 070: Placeholder -->
  <!-- BLOQUE 071: Placeholder -->
  <!-- BLOQUE 072: Placeholder -->
  <!-- BLOQUE 073: Placeholder -->
  <!-- BLOQUE 074: Placeholder -->
  <!-- BLOQUE 075: Placeholder -->
  <!-- BLOQUE 076: Placeholder -->
  <!-- BLOQUE 077: Placeholder -->
  <!-- BLOQUE 078: Placeholder -->
  <!-- BLOQUE 079: Placeholder -->
  <!-- BLOQUE 080: Placeholder -->
  <!-- BLOQUE 081: Placeholder -->
  <!-- BLOQUE 082: Placeholder -->
  <!-- BLOQUE 083: Placeholder -->
  <!-- BLOQUE 084: Placeholder -->
  <!-- BLOQUE 085: Placeholder -->
  <!-- BLOQUE 086: Placeholder -->
  <!-- BLOQUE 087: Placeholder -->
  <!-- BLOQUE 088: Placeholder -->
  <!-- BLOQUE 089: Placeholder -->
  <!-- BLOQUE 090: Placeholder -->
  <!-- BLOQUE 091: Placeholder -->
  <!-- BLOQUE 092: Placeholder -->
  <!-- BLOQUE 093: Placeholder -->
  <!-- BLOQUE 094: Placeholder -->
  <!-- BLOQUE 095: Placeholder -->
  <!-- BLOQUE 096: Placeholder -->
  <!-- BLOQUE 097: Placeholder -->
  <!-- BLOQUE 098: Placeholder -->
  <!-- BLOQUE 099: Placeholder -->
  <!-- BLOQUE 100: Placeholder -->
  <!-- BLOQUE 101: Placeholder -->
  <!-- BLOQUE 102: Placeholder -->
  <!-- BLOQUE 103: Placeholder -->
  <!-- BLOQUE 104: Placeholder -->
  <!-- BLOQUE 105: Placeholder -->
  <!-- BLOQUE 106: Placeholder -->
  <!-- BLOQUE 107: Placeholder -->
  <!-- BLOQUE 108: Placeholder -->
  <!-- BLOQUE 109: Placeholder -->
  <!-- BLOQUE 110: Placeholder -->
  <!-- BLOQUE 111: Placeholder -->
  <!-- BLOQUE 112: Placeholder -->
  <!-- BLOQUE 113: Placeholder -->
  <!-- BLOQUE 114: Placeholder -->
  <!-- BLOQUE 115: Placeholder -->
  <!-- BLOQUE 116: Placeholder -->
  <!-- BLOQUE 117: Placeholder -->
  <!-- BLOQUE 118: Placeholder -->
  <!-- BLOQUE 119: Placeholder -->
  <!-- BLOQUE 120: Placeholder -->
  <!-- BLOQUE 121: Placeholder -->
  <!-- BLOQUE 122: Placeholder -->
  <!-- BLOQUE 123: Placeholder -->
  <!-- BLOQUE 124: Placeholder -->
  <!-- BLOQUE 125: Placeholder -->
  <!-- BLOQUE 126: Placeholder -->
  <!-- BLOQUE 127: Placeholder -->
  <!-- BLOQUE 128: Placeholder -->
  <!-- BLOQUE 129: Placeholder -->
  <!-- BLOQUE 130: Placeholder -->
  <!-- BLOQUE 131: Placeholder -->
  <!-- BLOQUE 132: Placeholder -->
  <!-- BLOQUE 133: Placeholder -->
  <!-- BLOQUE 134: Placeholder -->
  <!-- BLOQUE 135: Placeholder -->
  <!-- BLOQUE 136: Placeholder -->
  <!-- BLOQUE 137: Placeholder -->
  <!-- BLOQUE 138: Placeholder -->
  <!-- BLOQUE 139: Placeholder -->
  <!-- BLOQUE 140: Placeholder -->
  <!-- BLOQUE 141: Placeholder -->
  <!-- BLOQUE 142: Placeholder -->
  <!-- BLOQUE 143: Placeholder -->
  <!-- BLOQUE 144: Placeholder -->
  <!-- BLOQUE 145: Placeholder -->
  <!-- BLOQUE 146: Placeholder -->
  <!-- BLOQUE 147: Placeholder -->
  <!-- BLOQUE 148: Placeholder -->
  <!-- BLOQUE 149: Placeholder -->
  <!-- BLOQUE 150: Placeholder -->
  <!-- BLOQUE 151: Placeholder -->
  <!-- BLOQUE 152: Placeholder -->
  <!-- BLOQUE 153: Placeholder -->
  <!-- BLOQUE 154: Placeholder -->
  <!-- BLOQUE 155: Placeholder -->
  <!-- BLOQUE 156: Placeholder -->
  <!-- BLOQUE 157: Placeholder -->
  <!-- BLOQUE 158: Placeholder -->
  <!-- BLOQUE 159: Placeholder -->
  <!-- BLOQUE 160: Placeholder -->
  <!-- BLOQUE 161: Placeholder -->
  <!-- BLOQUE 162: Placeholder -->
  <!-- BLOQUE 163: Placeholder -->
  <!-- BLOQUE 164: Placeholder -->
  <!-- BLOQUE 165: Placeholder -->
  <!-- BLOQUE 166: Placeholder -->
  <!-- BLOQUE 167: Placeholder -->
  <!-- BLOQUE 168: Placeholder -->
  <!-- BLOQUE 169: Placeholder -->
  <!-- BLOQUE 170: Placeholder -->
  <!-- BLOQUE 171: Placeholder -->
  <!-- BLOQUE 172: Placeholder -->
  <!-- BLOQUE 173: Placeholder -->
  <!-- BLOQUE 174: Placeholder -->
  <!-- BLOQUE 175: Placeholder -->
  <!-- BLOQUE 176: Placeholder -->
  <!-- BLOQUE 177: Placeholder -->
  <!-- BLOQUE 178: Placeholder -->
  <!-- BLOQUE 179: Placeholder -->
  <!-- BLOQUE 180: Placeholder -->
  <!-- BLOQUE 181: Placeholder -->
  <!-- BLOQUE 182: Placeholder -->
  <!-- BLOQUE 183: Placeholder -->
  <!-- BLOQUE 184: Placeholder -->
  <!-- BLOQUE 185: Placeholder -->
  <!-- BLOQUE 186: Placeholder -->
  <!-- BLOQUE 187: Placeholder -->
  <!-- BLOQUE 188: Placeholder -->
  <!-- BLOQUE 189: Placeholder -->
  <!-- BLOQUE 190: Placeholder -->
  <!-- BLOQUE 191: Placeholder -->
  <!-- BLOQUE 192: Placeholder -->
  <!-- BLOQUE 193: Placeholder -->
  <!-- BLOQUE 194: Placeholder -->
  <!-- BLOQUE 195: Placeholder -->
  <!-- BLOQUE 196: Placeholder -->
  <!-- BLOQUE 197: Placeholder -->
  <!-- BLOQUE 198: Placeholder -->
  <!-- BLOQUE 199: Placeholder -->
  <!-- BLOQUE 200: Placeholder -->
  <!-- BLOQUE 201: Placeholder -->
  <!-- BLOQUE 202: Placeholder -->
  <!-- BLOQUE 203: Placeholder -->
  <!-- BLOQUE 204: Placeholder -->
  <!-- BLOQUE 205: Placeholder -->
  <!-- BLOQUE 206: Placeholder -->
  <!-- BLOQUE 207: Placeholder -->
  <!-- BLOQUE 208: Placeholder -->
  <!-- BLOQUE 209: Placeholder -->
  <!-- BLOQUE 210: Placeholder -->
  <!-- BLOQUE 211: Placeholder -->
  <!-- BLOQUE 212: Placeholder -->
  <!-- BLOQUE 213: Placeholder -->
  <!-- BLOQUE 214: Placeholder -->
  <!-- BLOQUE 215: Placeholder -->
  <!-- BLOQUE 216: Placeholder -->
  <!-- BLOQUE 217: Placeholder -->
  <!-- BLOQUE 218: Placeholder -->
  <!-- BLOQUE 219: Placeholder -->
  <!-- BLOQUE 220: Placeholder -->
  <!-- BLOQUE 221: Placeholder -->
  <!-- BLOQUE 222: Placeholder -->
  <!-- BLOQUE 223: Placeholder -->
  <!-- BLOQUE 224: Placeholder -->
  <!-- BLOQUE 225: Placeholder -->
  <!-- BLOQUE 226: Placeholder -->
  <!-- BLOQUE 227: Placeholder -->
  <!-- BLOQUE 228: Placeholder -->
  <!-- BLOQUE 229: Placeholder -->
  <!-- BLOQUE 230: Placeholder -->
  <!-- BLOQUE 231: Placeholder -->
  <!-- BLOQUE 232: Placeholder -->
  <!-- BLOQUE 233: Placeholder -->
  <!-- BLOQUE 234: Placeholder -->
  <!-- BLOQUE 235: Placeholder -->
  <!-- BLOQUE 236: Placeholder -->
  <!-- BLOQUE 237: Placeholder -->
  <!-- BLOQUE 238: Placeholder -->
  <!-- BLOQUE 239: Placeholder -->
  <!-- BLOQUE 240: Placeholder -->
  <!-- BLOQUE 241: Placeholder -->
  <!-- BLOQUE 242: Placeholder -->
  <!-- BLOQUE 243: Placeholder -->
  <!-- BLOQUE 244: Placeholder -->
  <!-- BLOQUE 245: Placeholder -->
  <!-- BLOQUE 246: Placeholder -->
  <!-- BLOQUE 247: Placeholder -->
  <!-- BLOQUE 248: Placeholder -->
  <!-- BLOQUE 249: Placeholder -->
  <!-- BLOQUE 250: Placeholder -->
  <!-- BLOQUE 251: Placeholder -->
  <!-- BLOQUE 252: Placeholder -->
  <!-- BLOQUE 253: Placeholder -->
  <!-- BLOQUE 254: Placeholder -->
  <!-- BLOQUE 255: Placeholder -->
  <!-- BLOQUE 256: Placeholder -->
  <!-- BLOQUE 257: Placeholder -->
  <!-- BLOQUE 258: Placeholder -->
  <!-- BLOQUE 259: Placeholder -->
  <!-- BLOQUE 260: Placeholder -->
  <!-- BLOQUE 261: Placeholder -->
  <!-- BLOQUE 262: Placeholder -->
  <!-- BLOQUE 263: Placeholder -->
  <!-- BLOQUE 264: Placeholder -->
  <!-- BLOQUE 265: Placeholder -->
  <!-- BLOQUE 266: Placeholder -->
  <!-- BLOQUE 267: Placeholder -->
  <!-- BLOQUE 268: Placeholder -->
  <!-- BLOQUE 269: Placeholder -->
  <!-- BLOQUE 270: Placeholder -->
  <!-- BLOQUE 271: Placeholder -->
  <!-- BLOQUE 272: Placeholder -->
  <!-- BLOQUE 273: Placeholder -->
  <!-- BLOQUE 274: Placeholder -->
  <!-- BLOQUE 275: Placeholder -->
  <!-- BLOQUE 276: Placeholder -->
  <!-- BLOQUE 277: Placeholder -->
  <!-- BLOQUE 278: Placeholder -->
  <!-- BLOQUE 279: Placeholder -->
  <!-- BLOQUE 280: Placeholder -->
  <!-- BLOQUE 281: Placeholder -->
  <!-- BLOQUE 282: Placeholder -->
  <!-- BLOQUE 283: Placeholder -->
  <!-- BLOQUE 284: Placeholder -->
  <!-- BLOQUE 285: Placeholder -->
  <!-- BLOQUE 286: Placeholder -->
  <!-- BLOQUE 287: Placeholder -->
  <!-- BLOQUE 288: Placeholder -->
  <!-- BLOQUE 289: Placeholder -->
  <!-- BLOQUE 290: Placeholder -->
  <!-- BLOQUE 291: Placeholder -->
  <!-- BLOQUE 292: Placeholder -->
  <!-- BLOQUE 293: Placeholder -->
  <!-- BLOQUE 294: Placeholder -->
  <!-- BLOQUE 295: Placeholder -->
  <!-- BLOQUE 296: Placeholder -->
  <!-- BLOQUE 297: Placeholder -->
  <!-- BLOQUE 298: Placeholder -->
  <!-- BLOQUE 299: Placeholder -->
  <!-- BLOQUE 300: Placeholder -->
  <!-- BLOQUE 301: Placeholder -->
  <!-- BLOQUE 302: Placeholder -->
  <!-- BLOQUE 303: Placeholder -->
  <!-- BLOQUE 304: Placeholder -->
  <!-- BLOQUE 305: Placeholder -->
  <!-- BLOQUE 306: Placeholder -->
  <!-- BLOQUE 307: Placeholder -->
  <!-- BLOQUE 308: Placeholder -->
  <!-- BLOQUE 309: Placeholder -->
  <!-- BLOQUE 310: Placeholder -->
  <!-- BLOQUE 311: Placeholder -->
  <!-- BLOQUE 312: Placeholder -->
  <!-- BLOQUE 313: Placeholder -->
  <!-- BLOQUE 314: Placeholder -->
  <!-- BLOQUE 315: Placeholder -->
  <!-- BLOQUE 316: Placeholder -->
  <!-- BLOQUE 317: Placeholder -->
  <!-- BLOQUE 318: Placeholder -->
  <!-- BLOQUE 319: Placeholder -->
  <!-- BLOQUE 320: Placeholder -->
  <!-- BLOQUE 321: Placeholder -->
  <!-- BLOQUE 322: Placeholder -->
  <!-- BLOQUE 323: Placeholder -->
  <!-- BLOQUE 324: Placeholder -->
  <!-- BLOQUE 325: Placeholder -->
  <!-- BLOQUE 326: Placeholder -->
  <!-- BLOQUE 327: Placeholder -->
  <!-- BLOQUE 328: Placeholder -->
  <!-- BLOQUE 329: Placeholder -->
  <!-- BLOQUE 330: Placeholder -->
  <!-- BLOQUE 331: Placeholder -->
  <!-- BLOQUE 332: Placeholder -->
  <!-- BLOQUE 333: Placeholder -->
  <!-- BLOQUE 334: Placeholder -->
  <!-- BLOQUE 335: Placeholder -->
  <!-- BLOQUE 336: Placeholder -->
  <!-- BLOQUE 337: Placeholder -->
  <!-- BLOQUE 338: Placeholder -->
  <!-- BLOQUE 339: Placeholder -->
  <!-- BLOQUE 340: Placeholder -->
  <!-- BLOQUE 341: Placeholder -->
  <!-- BLOQUE 342: Placeholder -->
  <!-- BLOQUE 343: Placeholder -->
  <!-- BLOQUE 344: Placeholder -->
  <!-- BLOQUE 345: Placeholder -->
  <!-- BLOQUE 346: Placeholder -->
  <!-- BLOQUE 347: Placeholder -->
  <!-- BLOQUE 348: Placeholder -->
  <!-- BLOQUE 349: Placeholder -->
  <!-- BLOQUE 350: Placeholder -->
  <!-- BLOQUE 351: Placeholder -->
  <!-- BLOQUE 352: Placeholder -->
  <!-- BLOQUE 353: Placeholder -->
  <!-- BLOQUE 354: Placeholder -->
  <!-- BLOQUE 355: Placeholder -->
  <!-- BLOQUE 356: Placeholder -->
  <!-- BLOQUE 357: Placeholder -->
  <!-- BLOQUE 358: Placeholder -->
  <!-- BLOQUE 359: Placeholder -->
  <!-- BLOQUE 360: Placeholder -->
  <!-- BLOQUE 361: Placeholder -->
  <!-- BLOQUE 362: Placeholder -->
  <!-- BLOQUE 363: Placeholder -->
  <!-- BLOQUE 364: Placeholder -->
  <!-- BLOQUE 365: Placeholder -->
  <!-- BLOQUE 366: Placeholder -->
  <!-- BLOQUE 367: Placeholder -->
  <!-- BLOQUE 368: Placeholder -->
  <!-- BLOQUE 369: Placeholder -->
  <!-- BLOQUE 370: Placeholder -->
  <!-- BLOQUE 371: Placeholder -->
  <!-- BLOQUE 372: Placeholder -->
  <!-- BLOQUE 373: Placeholder -->
  <!-- BLOQUE 374: Placeholder -->
  <!-- BLOQUE 375: Placeholder -->
  <!-- BLOQUE 376: Placeholder -->
  <!-- BLOQUE 377: Placeholder -->
  <!-- BLOQUE 378: Placeholder -->
  <!-- BLOQUE 379: Placeholder -->
  <!-- BLOQUE 380: Placeholder -->
  <!-- BLOQUE 381: Placeholder -->
  <!-- BLOQUE 382: Placeholder -->
  <!-- BLOQUE 383: Placeholder -->
  <!-- BLOQUE 384: Placeholder -->
  <!-- BLOQUE 385: Placeholder -->
  <!-- BLOQUE 386: Placeholder -->
  <!-- BLOQUE 387: Placeholder -->
  <!-- BLOQUE 388: Placeholder -->
  <!-- BLOQUE 389: Placeholder -->
  <!-- BLOQUE 390: Placeholder -->
  <!-- BLOQUE 391: Placeholder -->
  <!-- BLOQUE 392: Placeholder -->
  <!-- BLOQUE 393: Placeholder -->
  <!-- BLOQUE 394: Placeholder -->
  <!-- BLOQUE 395: Placeholder -->
  <!-- BLOQUE 396: Placeholder -->
  <!-- BLOQUE 397: Placeholder -->
  <!-- BLOQUE 398: Placeholder -->
  <!-- BLOQUE 399: Placeholder -->
  <!-- BLOQUE 400: Placeholder -->
  <!-- BLOQUE 401: Placeholder -->
  <!-- BLOQUE 402: Placeholder -->
  <!-- BLOQUE 403: Placeholder -->
  <!-- BLOQUE 404: Placeholder -->
  <!-- BLOQUE 405: Placeholder -->
  <!-- BLOQUE 406: Placeholder -->
  <!-- BLOQUE 407: Placeholder -->
  <!-- BLOQUE 408: Placeholder -->
  <!-- BLOQUE 409: Placeholder -->
  <!-- BLOQUE 410: Placeholder -->
  <!-- BLOQUE 411: Placeholder -->
  <!-- BLOQUE 412: Placeholder -->
  <!-- BLOQUE 413: Placeholder -->
  <!-- BLOQUE 414: Placeholder -->
  <!-- BLOQUE 415: Placeholder -->
  <!-- BLOQUE 416: Placeholder -->
  <!-- BLOQUE 417: Placeholder -->
  <!-- BLOQUE 418: Placeholder -->
  <!-- BLOQUE 419: Placeholder -->
  <!-- BLOQUE 420: Placeholder -->
  <!-- BLOQUE 421: Placeholder -->
  <!-- BLOQUE 422: Placeholder -->
  <!-- BLOQUE 423: Placeholder -->
  <!-- BLOQUE 424: Placeholder -->
  <!-- BLOQUE 425: Placeholder -->
  <!-- BLOQUE 426: Placeholder -->
  <!-- BLOQUE 427: Placeholder -->
  <!-- BLOQUE 428: Placeholder -->
  <!-- BLOQUE 429: Placeholder -->
  <!-- BLOQUE 430: Placeholder -->
  <!-- BLOQUE 431: Placeholder -->
  <!-- BLOQUE 432: Placeholder -->
  <!-- BLOQUE 433: Placeholder -->
  <!-- BLOQUE 434: Placeholder -->
  <!-- BLOQUE 435: Placeholder -->
  <!-- BLOQUE 436: Placeholder -->
  <!-- BLOQUE 437: Placeholder -->
  <!-- BLOQUE 438: Placeholder -->
  <!-- BLOQUE 439: Placeholder -->
  <!-- BLOQUE 440: CIERRE -->
</body>
</html>
