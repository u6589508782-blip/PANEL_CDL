<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>CDL · Sin conexión</title>
<meta name="theme-color" content="#0c0f14">
<style>
  :root{ --bg:#0c0f14; --panel:#0f141c; --txt:#e5e7eb; --muted:#9aa7b4; --brand:#A60000; }
  *{ box-sizing:border-box; }
  html,body{ height:100%; margin:0; font-family:system-ui,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif; background:var(--bg); color:var(--txt); }
  .wrap{ min-height:100%; display:flex; align-items:center; justify-content:center; padding:20px; }
  .card{
    width:min(760px,100%); border:1px solid #2a3442; border-radius:16px; background:var(--panel);
    box-shadow:inset 0 1px 0 rgba(255,255,255,.05), 0 10px 28px rgba(0,0,0,.45); padding:22px;
  }
  h1{ margin:0 0 8px; font-size:22px; }
  p{ margin:.5rem 0; color:var(--muted); }
  .row{ display:flex; align-items:center; gap:12px; flex-wrap:wrap; }
  .badge{ display:inline-flex; align-items:center; gap:.4rem; padding:.24rem .55rem; border-radius:999px; border:1px solid #263042; background:#0b1220; font-weight:700;}
  .btn{
    appearance:none; border-radius:999px; border:1px solid #bbb; font-weight:800; cursor:pointer;
    padding:.42rem .9rem; color:#111; background:linear-gradient(180deg,#fdfdfd,#dfe3eb);
    box-shadow:inset 0 1px 0 rgba(255,255,255,.9),0 4px 12px rgba(0,0,0,.12);
  }
  .btn[disabled]{ opacity:.6; cursor:default; }
  .muted{ color:var(--muted); font-size:.925rem; }
  code{ background:#0b1220; border:1px solid #263042; border-radius:6px; padding:.1rem .35rem; }
  .footer{ margin-top:12px; font-size:.85rem; color:#9aa7b4; text-align:center; }
  .logo{
    width:22px;height:22px; display:inline-block; vertical-align:-3px; margin-right:6px;
    background:
      url("angular.png") no-repeat center/contain,
      url("/angular.png") no-repeat center/contain,
      linear-gradient(135deg, var(--brand), #E43B3B);
    border-radius:4px;
  }
</style>
</head>
<body>
<div class="wrap">
  <div class="card" role="status" aria-live="polite">
    <h1><span class="logo" aria-hidden="true"></span>Estás sin conexión</h1>
    <p>La aplicación <b>CDL · CMMS</b> no ha podido cargar contenido de la red.</p>
    <p class="muted">Puedes seguir usando partes ya cacheadas. Cuando recuperes conexión, recarga para volver a la app.</p>

    <div class="row" style="margin-top:10px">
      <button class="btn" id="btnReintentar">Reintentar</button>
      <a class="btn" href="/" id="btnIrInicio">Ir al inicio</a>
      <span class="badge" id="netBadge">Estado: <code id="netState">offline</code></span>
    </div>

    <p class="muted" style="margin-top:10px">
      Si el problema persiste, cierra y vuelve a abrir la app. El modo offline usa <code>Service Worker</code> y caché local.
    </p>

    <div class="footer">© CDL MANTENIMIENTO</div>
  </div>
</div>

<script>
(function(){
  const st = document.getElementById('netState');
  function paint(){
    const on = navigator.onLine;
    st.textContent = on ? 'online' : 'offline';
    document.getElementById('btnReintentar').disabled = !on && !document.referrer;
  }
  window.addEventListener('online', paint);
  window.addEventListener('offline', paint);
  paint();

  document.getElementById('btnReintentar').addEventListener('click', ()=>{
    if (navigator.onLine) location.reload();
    else alert('Aún sin conexión. Inténtalo de nuevo cuando vuelva la red.');
  });
})();
</script>
</body>
</html>